export type RelicJSON = Pick<Relic, 'id' | 'color' | 'effects' | 'itemId'>

export class Relic {
	static new(options: RelicJSON): Relic {
		return new Relic(options.id, options.color, options.effects, options.itemId)
	}

	get size(): 'small' | 'medium' | 'large' {
		switch (this.effects.length) {
			case 1:
				return 'small'
			case 2:
				return 'medium'
			case 3:
				return 'large'
			default:
				throw new Error(`Unexpected effects length: ${this.effects.length}`)
		}
	}

	get name(): string {
		const itemName = uniqItemNameMap[this.itemId]

		if (itemName) return itemName

		const sizeMap = {
			small: '繊細な',
			medium: '端正な',
			large: '壮大な',
		}
		const colorMap = {
			[RelicColor.Red]: '燃える',
			[RelicColor.Blue]: '滴る',
			[RelicColor.Yellow]: '輝く',
			[RelicColor.Green]: '静まる',
		}

		const prefix = sizeMap[this.size]
		const color = colorMap[this.color]

		return `${prefix}${color}景色`
	}

	get normalizedEffectIds() {
		return this.effects.map(normalizeEffectId)
	}

	private constructor(
		/** 遺物のID */
		public id: string,

		/** 遺物の色 */
		public color: RelicColor,

		/** 遺物の効果 */
		public effects: number[],

		/** 遺物のアイテムID */
		public itemId: number,
	) {}
}

export type RelicColor = (typeof RelicColor)[keyof typeof RelicColor]
export const RelicColor = {
	Red: 'Red',
	Blue: 'Blue',
	Green: 'Green',
	Yellow: 'Yellow',
} as const satisfies Record<string, string>

/**
 * @see https://docs.google.com/spreadsheets/d/1Gz6fqIBNr2BXr45te9ewTolHJr4zZ_Apbqa09gL3VbI/
 */
export const relicEffectMap: Record<number, { name: string; stackable: boolean }> = {
	10000: { name: '攻撃連続時、FP回復', stackable: true },
	10001: { name: '攻撃を受けると攻撃力上昇', stackable: false },
	7000000: { name: '生命力+1', stackable: true },
	7000001: { name: '生命力+2', stackable: true },
	7000002: { name: '生命力+3', stackable: true },
	7000090: { name: '最大HP上昇', stackable: false },
	7000100: { name: '精神力+1', stackable: true },
	7000101: { name: '精神力+2', stackable: true },
	7000102: { name: '精神力+3', stackable: true },
	7000190: { name: '最大FP上昇', stackable: false },
	7000200: { name: '持久力+1', stackable: true },
	7000201: { name: '持久力+2', stackable: true },
	7000202: { name: '持久力+3', stackable: true },
	7000290: { name: '最大スタミナ上昇', stackable: false },
	7000300: { name: '筋力+1', stackable: true },
	7000301: { name: '筋力+2', stackable: true },
	7000302: { name: '筋力+3', stackable: true },
	7000400: { name: '技量+1', stackable: true },
	7000401: { name: '技量+2', stackable: true },
	7000402: { name: '技量+3', stackable: true },
	7000500: { name: '知力+1', stackable: true },
	7000501: { name: '知力+2', stackable: true },
	7000502: { name: '知力+3', stackable: true },
	7000600: { name: '信仰+1', stackable: true },
	7000601: { name: '信仰+2', stackable: true },
	7000602: { name: '信仰+3', stackable: true },
	7000700: { name: '神秘+1', stackable: true },
	7000701: { name: '神秘+2', stackable: true },
	7000702: { name: '神秘+3', stackable: true },
	7000800: { name: 'スキルクールタイム軽減+1', stackable: true },
	7000801: { name: 'スキルクールタイム軽減+2', stackable: true },
	7000802: { name: 'スキルクールタイム軽減+3', stackable: true },
	7000900: { name: 'アーツゲージ蓄積増加+1', stackable: true },
	7000901: { name: 'アーツゲージ蓄積増加+2', stackable: true },
	7000902: { name: 'アーツゲージ蓄積増加+3', stackable: true },
	7001000: { name: '強靭度+1', stackable: true },
	7001001: { name: '強靭度+2', stackable: true },
	7001002: { name: '強靭度+3', stackable: true },
	7001100: { name: 'HP持続回復', stackable: false },
	7001400: { name: '物理攻撃力上昇', stackable: true },
	7001401: { name: '物理攻撃力上昇+1', stackable: true },
	7001402: { name: '物理攻撃力上昇+2', stackable: true },
	7001403: { name: '物理攻撃力上昇+3', stackable: true },
	7001500: { name: '魔力攻撃力上昇', stackable: true },
	7001501: { name: '魔力攻撃力上昇+1', stackable: true },
	7001502: { name: '魔力攻撃力上昇+2', stackable: true },
	7001600: { name: '炎攻撃力上昇', stackable: true },
	7001601: { name: '炎攻撃力上昇+1', stackable: true },
	7001602: { name: '炎攻撃力上昇+2', stackable: true },
	7001700: { name: '雷攻撃力上昇', stackable: true },
	7001701: { name: '雷攻撃力上昇+1', stackable: true },
	7001702: { name: '雷攻撃力上昇+2', stackable: true },
	7001800: { name: '聖攻撃力上昇', stackable: true },
	7001801: { name: '聖攻撃力上昇+1', stackable: true },
	7001802: { name: '聖攻撃力上昇+2', stackable: true },
	7002600: { name: '魔力カット率上昇', stackable: true },
	7002700: { name: '炎カット率上昇', stackable: true },
	7002800: { name: '雷カット率上昇', stackable: true },
	7002900: { name: '聖カット率上昇', stackable: true },
	7003000: { name: '毒耐性上昇', stackable: true },
	7003100: { name: '出血耐性上昇', stackable: true },
	7003200: { name: '睡眠耐性上昇', stackable: true },
	7003300: { name: '抗死耐性上昇', stackable: true },
	7003400: { name: '腐敗耐性上昇', stackable: true },
	7003500: { name: '冷気耐性上昇', stackable: true },
	7003600: { name: '発狂耐性上昇', stackable: true },
	7005600: { name: 'ダメージを受けた直後、攻撃によりHPの一部を回復', stackable: false },
	7006000: { name: '両手持ちの、体勢を崩す力上昇', stackable: true },
	// 7006001: { name: '両手持ちの、体勢を崩す力上昇', stackable: true },
	7006100: { name: '二刀持ちの、体勢を崩す力上昇', stackable: true },
	7006101: { name: '二刀持ちの、体勢を崩す力上昇+1', stackable: true },
	7006200: { name: '物理カット率上昇', stackable: true },
	7010200: { name: '聖杯瓶の回復を、周囲の味方に分配', stackable: false },
	7010500: { name: '【追跡者】 アーツ発動時、周囲を延焼', stackable: true },
	7010700: { name: '【レディ】 短剣による連続攻撃時、周囲の敵に直近の出来事を再演', stackable: true },
	7010900: { name: '【復讐者】 アーツ発動時、自身のHPと引き換えに周囲の味方のHPを全回復', stackable: true },
	7011000: { name: '【守護者】 スキルの持続時間延長', stackable: true },
	7011200: { name: '【復讐者】 アーツ発動時、霊炎の爆発を発生', stackable: true },
	7011600: { name: '【守護者】 斧槍タメ攻撃時、つむじ風が発生', stackable: true },
	7011700: { name: '【執行者】 アーツ発動中、咆哮でHP回復', stackable: true },
	7012000: { name: '【守護者】 アーツ発動時、周囲の味方HPを徐々に回復', stackable: true },
	7012200: { name: 'HP低下時、周囲の味方を含めHPをゆっくりと回復', stackable: false },
	7012300: { name: 'HP低下時、カット率上昇', stackable: true },
	7020000: { name: '【追跡者】 スキル使用時、通常攻撃で炎を纏った追撃を行う（大剣のみ）', stackable: true },
	7030000: { name: 'トーテム・ステラの周囲で、強靭度上昇', stackable: true },
	7030200: { name: '苔薬などのアイテム使用でHP回復', stackable: false },
	7030600: { name: 'ガード成功時、アーツゲージを蓄積', stackable: false },
	7030700: { name: 'ガード中、敵に狙われやすくなる', stackable: true },
	7030800: { name: '致命の一撃で、アーツゲージ蓄積増加', stackable: false },
	7030900: { name: '脂アイテム使用時、追加で物理攻撃力上昇', stackable: false },
	7031200: { name: '【復讐者】 アーツ発動時、ファミリーと味方を強化', stackable: false },
	7031300: { name: '【無頼漢】 スキル中に攻撃を受けると攻撃力と最大スタミナ上昇', stackable: false },
	7031800: { name: '【レディ】 背後からの致命の一撃後、自身の姿を見え難くし、足音を消す', stackable: false },
	7031900: { name: '致命の一撃で、ルーンを取得', stackable: true },
	7032400: { name: '【追跡者】 アビリティ発動時、アーツゲージ増加', stackable: false },
	7032700: { name: '【レディ】 アーツ発動中、敵撃破で攻撃力上昇', stackable: false },
	7032800: { name: '【隠者】 属性痕を集めた時、「魔術の地」が発動', stackable: false },
	7032900: { name: '【隠者】 アーツ発動時、自身が出血状態になり、攻撃力上昇', stackable: false },
	7033200: { name: '【追跡者】 スキルの使用回数+1', stackable: false },
	7033400: { name: '【守護者】 アビリティ発動中、ガード成功時、衝撃波が発生', stackable: false },
	7034100: { name: '【隠者】 アーツ発動時、最大HP上昇', stackable: false },
	7034400: { name: '【執行者】 スキル中の攻撃力上昇、攻撃時にHP減少', stackable: false },
	7034500: { name: '【執行者】 スキル中、妖刀が解放状態になるとHP回復', stackable: false },
	7034600: { name: '【鉄の目】 アーツのタメ発動時、毒の状態異常を付加', stackable: false },
	7034700: { name: '【鉄の目】 アーツ発動後、刺突カウンター強化', stackable: false },
	7035100: { name: '致命の一撃で、スタミナ回復速度上昇', stackable: true },
	7035400: { name: 'ジェスチャー「あぐら」により、発狂が蓄積', stackable: false },
	7035500: { name: '発狂状態になると、FP持続回復', stackable: false },
	7035700: { name: '武器の持ち替え時、いずれかの属性攻撃力を付加', stackable: false },
	7035800: { name: '属性攻撃力が付加された時、属性攻撃力上昇', stackable: true },
	7035900: { name: '武器の持ち替え時、物理攻撃力上昇', stackable: false },
	7036100: { name: 'ガード成功時、HP回復', stackable: false },
	7040000: { name: '通常攻撃の1段目強化', stackable: true },
	7040100: { name: 'ガードカウンター強化', stackable: true },
	7040200: { name: '致命の一撃強化', stackable: true },
	7040201: { name: '致命の一撃強化+1', stackable: false },
	7040300: { name: '投擲壺の攻撃力上昇', stackable: true },
	7040400: { name: '投擲ナイフの攻撃力上昇', stackable: true },
	7040500: { name: '輝石、重力石の攻撃力上昇', stackable: true },
	7043000: { name: '咆哮とブレス強化', stackable: true },
	7043100: { name: '調香術強化', stackable: true },
	7043200: { name: '石堀りの魔術を強化', stackable: true },
	7043300: { name: 'カーリアの剣の魔術を強化', stackable: true },
	7043400: { name: '輝剣の魔術を強化', stackable: true },
	7043500: { name: '不可視の魔術を強化', stackable: true },
	7043600: { name: '結晶人の魔術を強化', stackable: true },
	7043700: { name: '重力の魔術を強化', stackable: true },
	7043800: { name: '茨の魔術を強化', stackable: true },
	// 7043900: { name: '夜の魔術を強化', stackable: true },
	7044000: { name: '黄金律原理主義の祈祷を強化', stackable: true },
	7044100: { name: '王都古竜信仰の祈祷を強化', stackable: true },
	7044200: { name: '巨人の火の祈祷を強化', stackable: true },
	7044300: { name: '神狩りの祈祷を強化', stackable: true },
	7044400: { name: '獣の祈祷を強化', stackable: true },
	7044500: { name: '狂い火の祈祷を強化', stackable: true },
	7044600: { name: '竜餐の祈祷を強化', stackable: true },
	7050000: { name: '自身を除く、周囲の味方のスタミナ回復速度上昇', stackable: false },
	7050100: { name: 'アイテムの効果が周囲の味方にも発動', stackable: false },
	7060000: { name: '封牢の囚を倒す度、攻撃力上昇', stackable: false },
	7060100: { name: '魔術師塔の仕掛けが解除される度、最大FP上昇', stackable: false },
	7060200: { name: '夜の侵入者を倒す度、攻撃力上昇', stackable: false },
	7070000: { name: '埋もれ宝の位置を地図に表示', stackable: false },
	7080000: { name: '短剣の武器種を3つ以上装備していると攻撃力上昇', stackable: false },
	7080100: { name: '直剣の武器種を3つ以上装備していると攻撃力上昇', stackable: false },
	7080200: { name: '大剣の武器種を3つ以上装備していると攻撃力上昇', stackable: false },
	7080300: { name: '特大剣の武器種を3つ以上装備していると攻撃力上昇', stackable: false },
	7080400: { name: '曲剣の武器種を3つ以上装備していると攻撃力上昇', stackable: false },
	7080500: { name: '大曲剣の武器種を3つ以上装備していると攻撃力上昇', stackable: false },
	7080600: { name: '刀の武器種を3つ以上装備していると攻撃力上昇', stackable: false },
	7080700: { name: '両刃剣の武器種を3つ以上装備していると攻撃力上昇', stackable: false },
	7080800: { name: '刺剣の武器種を3つ以上装備していると攻撃力上昇', stackable: false },
	7080900: { name: '重刺剣の武器種を3つ以上装備していると攻撃力上昇', stackable: false },
	7081000: { name: '斧の武器種を3つ以上装備していると攻撃力上昇', stackable: false },
	7081100: { name: '大斧の武器種を3つ以上装備していると攻撃力上昇', stackable: false },
	7081200: { name: '槌の武器種を3つ以上装備していると攻撃力上昇', stackable: false },
	7081300: { name: '大槌の武器種を3つ以上装備していると攻撃力上昇', stackable: false },
	7081400: { name: 'フレイルの武器種を3つ以上装備していると攻撃力上昇', stackable: false },
	7081500: { name: '槍の武器種を3つ以上装備していると攻撃力上昇', stackable: false },
	7081700: { name: '大槍の武器種を3つ以上装備していると攻撃力上昇', stackable: false },
	7081800: { name: '斧槍の武器種を3つ以上装備していると攻撃力上昇', stackable: false },
	7081900: { name: '鎌の武器種を3つ以上装備していると攻撃力上昇', stackable: false },
	7082000: { name: '拳の武器種を3つ以上装備していると攻撃力上昇', stackable: false },
	7082100: { name: '爪の武器種を3つ以上装備していると攻撃力上昇', stackable: false },
	7082200: { name: '鞭の武器種を3つ以上装備していると攻撃力上昇', stackable: false },
	7082300: { name: '特大武器の武器種を3つ以上装備していると攻撃力上昇', stackable: false },
	7082400: { name: '弓の武器種を3つ以上装備していると攻撃力上昇', stackable: false },
	7082500: { name: '杖の武器種を3つ以上装備していると最大FP上昇', stackable: false },
	7082600: { name: '聖印の武器種を3つ以上装備していると最大FP上昇', stackable: false },
	7082700: { name: '小盾の武器種を3つ以上装備していると最大HP上昇', stackable: false },
	7082800: { name: '中盾の武器種を3つ以上装備していると最大HP上昇', stackable: false },
	7082900: { name: '大盾の武器種を3つ以上装備していると最大HP上昇', stackable: false },
	7090000: { name: '敵を倒した時のアーツゲージ蓄積増加', stackable: false },
	7090100: { name: '敵を倒した時、自身を除く周囲の味方のHPを回復', stackable: false },
	7090300: { name: 'トーテム・ステラの周囲で敵を倒した時、HP回復', stackable: true },
	7100100: { name: '攻撃命中時、スタミナ回復', stackable: false },
	7100110: { name: '攻撃命中時、スタミナ回復+1', stackable: false },
	// 7100190: { name: '攻撃成功時、スタミナ回復+1', stackable: false },
	7110000: { name: '自身と味方の取得ルーン増加', stackable: true },
	7120000: { name: '出撃時の武器に魔力攻撃力を付加', stackable: false },
	7120100: { name: '出撃時の武器に炎攻撃力を付加', stackable: false },
	7120200: { name: '出撃時の武器に雷攻撃力を付加', stackable: false },
	7120300: { name: '出撃時の武器に聖攻撃力を付加', stackable: false },
	7120400: { name: '出撃時の武器に冷気の状態異常を付加', stackable: false },
	7120500: { name: '出撃時の武器に毒の状態異常を付加', stackable: false },
	7120600: { name: '出撃時の武器に出血の状態異常を付加', stackable: false },
	7120900: { name: '出撃時に「石剣の鍵」を持つ', stackable: false },
	7121000: { name: '出撃時に「小さなポーチ」を持つ', stackable: true },
	7121100: { name: '出撃時に「火炎壺」を持つ', stackable: true },
	7121200: { name: '出撃時に「魔力壺」を持つ', stackable: true },
	7121300: { name: '出撃時に「雷壺」を持つ', stackable: true },
	7121400: { name: '出撃時に「聖水壺」を持つ', stackable: true },
	7121500: { name: '出撃時に「骨の毒投げ矢」を持つ', stackable: true },
	7121600: { name: '出撃時に「結晶投げ矢」を持つ', stackable: true },
	7121700: { name: '出撃時に「スローイングダガー」を持つ', stackable: true },
	7121800: { name: '出撃時に「屑輝石」を持つ', stackable: true },
	7121900: { name: '出撃時に「塊の重力石」を持つ', stackable: true },
	7122000: { name: '出撃時に「誘惑の枝」を持つ', stackable: true },
	7122100: { name: '出撃時に「呪霊喚びの鈴」を持つ', stackable: true },
	7122200: { name: '出撃時に「火脂」を持つ', stackable: true },
	7122300: { name: '出撃時に「魔力脂」を持つ', stackable: true },
	7122400: { name: '出撃時に「雷脂」を持つ', stackable: true },
	7122500: { name: '出撃時に「聖脂」を持つ', stackable: true },
	7122600: { name: '出撃時に「盾脂」を持つ', stackable: true },
	7122700: { name: '出撃時の武器の戦技を「輝剣の円陣」にする', stackable: true },
	7122800: { name: '出撃時の武器の戦技を「グラビタス」にする', stackable: true },
	7122900: { name: '出撃時の武器の戦技を「炎撃」にする', stackable: true },
	7123000: { name: '出撃時の武器の戦技を「溶岩噴火」にする', stackable: true },
	7123100: { name: '出撃時の武器の戦技を「落雷」にする', stackable: true },
	7123200: { name: '出撃時の武器の戦技を「雷撃斬」にする', stackable: true },
	7123300: { name: '出撃時の武器の戦技を「聖なる刃」にする', stackable: true },
	7123400: { name: '出撃時の武器の戦技を「祈りの一撃」にする', stackable: true },
	7123500: { name: '出撃時の武器の戦技を「毒の霧」にする', stackable: true },
	7123600: { name: '出撃時の武器の戦技を「毒蛾は二度舞う」にする', stackable: true },
	7123700: { name: '出撃時の武器の戦技を「血の刃」にする', stackable: true },
	7123800: { name: '出撃時の武器の戦技を「切腹」にする', stackable: true },
	7123900: { name: '出撃時の武器の戦技を「冷気の霧」にする', stackable: true },
	7124000: { name: '出撃時の武器の戦技を「霜踏み」にする', stackable: true },
	7124100: { name: '出撃時の武器の戦技を「白い影の誘い」にする', stackable: true },
	7124300: { name: '出撃時の武器の戦技を「我慢」にする', stackable: true },
	7124400: { name: '出撃時の武器の戦技を「クイックステップ」にする', stackable: true },
	7124500: { name: '出撃時の武器の戦技を「嵐撃」にする', stackable: true },
	7124600: { name: '出撃時の武器の戦技を「デタミネーション」にする', stackable: true },
	7124700: { name: '出撃時の武器の戦技を「アローレイン」にする', stackable: true },
	7126000: { name: '出撃時に「星光の欠片」を持つ', stackable: true },
	// 7126001: { name: '出撃時に「星光の欠片」を持つ', stackable: true },
	// 7126002: { name: '出撃時に「星光の欠片」を持つ', stackable: true },
	7150000: { name: 'ガードカウンターに、自身の現在HPの一部を加える', stackable: false },
	7160000: { name: '刺突カウンター発生時、HP回復', stackable: false },
	7220000: { name: '【復讐者】ファミリーと共闘中の間、自身を強化', stackable: false },
	7230000: { name: '出撃中、ショップでの購入に必要なルーンが割引', stackable: false },
	7230001: { name: '出撃中、ショップでの購入に必要なルーンが大割引', stackable: false },
	7240000: { name: 'ダメージで吹き飛ばされた時、強靭度とカット率上昇', stackable: false },
	7260000: { name: '毒状態の敵に対する攻撃を強化', stackable: false },
	7260300: { name: '腐敗状態の敵に対する攻撃を強化', stackable: false },
	7260400: { name: '凍傷状態の敵に対する攻撃を強化', stackable: false },
	7260700: { name: '周囲で凍傷状態の発生時、自身の姿を隠す', stackable: false },
	7260710: { name: '周囲で毒／腐敗状態発生時、攻撃力上昇', stackable: false },
	// 7260800: { name: '周囲で毒／腐敗状態発生時、攻撃力上昇', stackable: false },
	7270100: { name: '【鉄の目】 スキルの使用回数+1', stackable: false },
	7280000: { name: '【鉄の目】 弱点の持続時間を延長させる', stackable: false },
	7290000: { name: '【レディ】 スキルのダメージ上昇', stackable: false },
	7310000: { name: '【無頼漢】 アーツの効果時間延長', stackable: false },
	7330000: { name: '短剣の攻撃力上昇', stackable: true },
	7330100: { name: '直剣の攻撃力上昇', stackable: true },
	7330200: { name: '大剣の攻撃力上昇', stackable: true },
	7330300: { name: '特大剣の攻撃力上昇', stackable: true },
	7330400: { name: '曲剣の攻撃力上昇', stackable: true },
	7330500: { name: '大曲剣の攻撃力上昇', stackable: true },
	7330600: { name: '刀の攻撃力上昇', stackable: true },
	7330700: { name: '両刃剣の攻撃力上昇', stackable: true },
	7330800: { name: '刺剣の攻撃力上昇', stackable: true },
	7330900: { name: '重刺剣の攻撃力上昇', stackable: true },
	7331000: { name: '斧の攻撃力上昇', stackable: true },
	7331100: { name: '大斧の攻撃力上昇', stackable: true },
	7331200: { name: '槌の攻撃力上昇', stackable: true },
	7331300: { name: '大槌の攻撃力上昇', stackable: true },
	7331400: { name: 'フレイルの攻撃力上昇', stackable: true },
	7331500: { name: '槍の攻撃力上昇', stackable: true },
	7331700: { name: '大槍の攻撃力上昇', stackable: true },
	7331800: { name: '斧槍の攻撃力上昇', stackable: true },
	7331900: { name: '鎌の攻撃力上昇', stackable: true },
	7332000: { name: '拳の攻撃力上昇', stackable: true },
	7332100: { name: '爪の攻撃力上昇', stackable: true },
	7332200: { name: '鞭の攻撃力上昇', stackable: true },
	7332300: { name: '特大武器の攻撃力上昇', stackable: true },
	7332400: { name: '弓の攻撃力上昇', stackable: true },
	7340000: { name: '短剣の攻撃でHP回復', stackable: false },
	7340100: { name: '直剣の攻撃でHP回復', stackable: false },
	7340200: { name: '大剣の攻撃でHP回復', stackable: false },
	7340300: { name: '特大剣の攻撃でHP回復', stackable: false },
	7340400: { name: '曲剣の攻撃でHP回復', stackable: false },
	7340500: { name: '大曲剣の攻撃でHP回復', stackable: false },
	7340600: { name: '刀の攻撃でHP回復', stackable: false },
	7340700: { name: '両刃剣の攻撃でHP回復', stackable: false },
	7340800: { name: '刺剣の攻撃でHP回復', stackable: false },
	7340900: { name: '重刺剣の攻撃でHP回復', stackable: false },
	7341000: { name: '斧の攻撃でHP回復', stackable: false },
	7341100: { name: '大斧の攻撃でHP回復', stackable: false },
	7341200: { name: '槌の攻撃でHP回復', stackable: false },
	7341300: { name: '大槌の攻撃でHP回復', stackable: false },
	7341400: { name: 'フレイルの攻撃でHP回復', stackable: false },
	7341500: { name: '槍の攻撃でHP回復', stackable: false },
	7341700: { name: '大槍の攻撃でHP回復', stackable: false },
	7341800: { name: '斧槍の攻撃でHP回復', stackable: false },
	7341900: { name: '鎌の攻撃でHP回復', stackable: false },
	7342000: { name: '拳の攻撃でHP回復', stackable: false },
	7342100: { name: '爪の攻撃でHP回復', stackable: false },
	7342200: { name: '鞭の攻撃でHP回復', stackable: false },
	7342300: { name: '特大武器の攻撃でHP回復', stackable: false },
	7342400: { name: '弓の攻撃でHP回復', stackable: false },
	7350000: { name: '短剣の攻撃でFP回復', stackable: false },
	7350100: { name: '直剣の攻撃でFP回復', stackable: false },
	7350200: { name: '大剣の攻撃でFP回復', stackable: false },
	7350300: { name: '特大剣の攻撃でFP回復', stackable: false },
	7350400: { name: '曲剣の攻撃でFP回復', stackable: false },
	7350500: { name: '大曲剣の攻撃でFP回復', stackable: false },
	7350600: { name: '刀の攻撃でFP回復', stackable: false },
	7350700: { name: '両刃剣の攻撃でFP回復', stackable: false },
	7350800: { name: '刺剣の攻撃でFP回復', stackable: false },
	7350900: { name: '重刺剣の攻撃でFP回復', stackable: false },
	7351000: { name: '斧の攻撃でFP回復', stackable: false },
	7351100: { name: '大斧の攻撃でFP回復', stackable: false },
	7351200: { name: '槌の攻撃でFP回復', stackable: false },
	7351300: { name: '大槌の攻撃でFP回復', stackable: false },
	7351400: { name: 'フレイルの攻撃でFP回復', stackable: false },
	7351500: { name: '槍の攻撃でFP回復', stackable: false },
	7351700: { name: '大槍の攻撃でFP回復', stackable: false },
	7351800: { name: '斧槍の攻撃でFP回復', stackable: false },
	7351900: { name: '鎌の攻撃でFP回復', stackable: false },
	7352000: { name: '拳の攻撃でFP回復', stackable: false },
	7352100: { name: '爪の攻撃でFP回復', stackable: false },
	7352200: { name: '鞭の攻撃でFP回復', stackable: false },
	7352300: { name: '特大武器の攻撃でFP回復', stackable: false },
	7352400: { name: '弓の攻撃でFP回復', stackable: false },
}

/**
 * 重複とみなされる遺物効果のIDを正規化する
 *
 * @param id - 遺物効果のID
 */
export function normalizeEffectId(id: number): number {
	return (
		{
			7100190: 7100110,
			7126001: 7126000,
			7126002: 7126000,
			7260800: 7260710,
			7006001: 7006000,
			7036000: 10000,
			7032200: 10001,
		}[id] || id
	)
}

function mapper(item: number | { name: string; children: number[] }): {
	id: string
	name: string
	stackable: boolean
	children?: ReturnType<typeof mapper>[]
} {
	if (typeof item === 'object') {
		const children = item.children.map(mapper)

		return {
			id: item.children.join(','),
			name: item.name,
			stackable: children.some((c) => c.stackable),
			children,
		}
	}

	return { id: String(item), ...relicEffectMap[item] }
}

export const relicCategoryEntries: ReturnType<typeof mapper>[] = [
	{
		id: '',
		stackable: true,
		name: '能力値',
		children: [
			7000090,
			7000190,
			7000290,
			{
				name: '生命力',
				children: [7000000, 7000001, 7000002],
			},
			{
				name: '精神力',
				children: [7000100, 7000101, 7000102],
			},
			{
				name: '持久力',
				children: [7000200, 7000201, 7000202],
			},
			{
				name: '筋力',
				children: [7000300, 7000301, 7000302],
			},
			{
				name: '技量',
				children: [7000400, 7000401, 7000402],
			},
			{
				name: '知力',
				children: [7000500, 7000501, 7000502],
			},
			{
				name: '信仰',
				children: [7000600, 7000601, 7000602],
			},
			{
				name: '神秘',
				children: [7000700, 7000701, 7000702],
			},
			{
				name: '強靭度',
				children: [7001000, 7001001, 7001002],
			},
			7060100,
		].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '攻撃力',
		children: [
			{
				name: '物理攻撃力上昇',
				children: [7001400, 7001401, 7001402, 7001403],
			},
			{
				name: '魔力攻撃力上昇',
				children: [7001500, 7001501, 7001502],
			},
			{
				name: '炎攻撃力上昇',
				children: [7001600, 7001601, 7001602],
			},
			{
				name: '雷攻撃力上昇',
				children: [7001700, 7001701, 7001702],
			},
			{
				name: '聖攻撃力上昇',
				children: [7001800, 7001801, 7001802],
			},
			7040000,
			{
				name: '致命の一撃強化',
				children: [7040200, 7040201],
			},
			7043000,
			7006000,
			{
				name: '二刀持ちの、体勢を崩す力上昇',
				children: [7006100, 7006101],
			},
			7035900,
			7035800,
			10001,
			7060000,
			7060200,
			7040100,
			7150000,
			7030900,
			7040300,
			7040400,
			7040500,
			7043100,
		].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: 'スキル／アーツ',
		children: [
			{
				name: 'スキルクールタイム軽減',
				children: [7000800, 7000801, 7000802],
			},
			{
				name: 'アーツゲージ蓄積増加',
				children: [7000900, 7000901, 7000902],
			},
			7090000,
			7030800,
			7030600,
		].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '魔術／祈祷',
		children: [
			7043400, 7043200, 7043300, 7043500, 7043600, 7043700, 7043800, /*7043900,*/ 7044000, 7044100, 7044200, 7044300,
			7044400, 7044500, 7044600,
		].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: 'カット率',
		children: [7006200, 7002600, 7002700, 7002800, 7002900, 7012300, 7240000].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '状態異常耐性',
		children: [7003000, 7003400, 7003100, 7003500, 7003200, 7003600, 7003300].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '回復',
		children: [
			7001100,
			7012200,
			7036100,
			7160000,
			7005600,
			7030200,
			10000,
			7035500,
			{
				name: '攻撃命中時、スタミナ回復',
				children: [7100100, 7100110],
			},
			7035100,
		].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: 'アクション',
		children: [7031900, 7035700, 7030700, 7035400, 7260000, 7260300, 7260400, 7260710, 7260700].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '出撃時の武器（戦技）',
		children: [
			7124300, 7124400, 7124500, 7124600, 7122700, 7122800, 7122900, 7123000, 7123100, 7123200, 7123300, 7123400,
			7123500, 7123600, 7123700, 7123800, 7123900, 7124000, 7124100, 7124700,
		].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '出撃時の武器（付加）',
		children: [7120000, 7120100, 7120200, 7120300, 7120500, 7120600, 7120400].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '出撃時のアイテム',
		children: [
			7126000, 7121100, 7121200, 7121300, 7121400, 7121500, 7121600, 7121700, 7121800, 7121900, 7122000, 7122100,
			7122200, 7122300, 7122400, 7122500, 7122600, 7121000, 7120900,
		].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: 'マップ環境',
		children: [7070000, 7230000, 7230001].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: 'チームメンバー',
		children: [7110000, 7050000, 7010200, 7090100, 7050100].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '追跡者',
		children: [7032400, 7020000, 7033200, 7010500].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '守護者',
		children: [7033400, 7011000, 7012000, 7011600].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '鉄の目',
		children: [7270100, 7034600, 7034700, 7280000].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: 'レディ',
		children: [7290000, 7032700, 7010700, 7031800].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '無頼漢',
		children: [7031300, 7310000, 7090300, 7030000].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '復讐者',
		children: [7011200, 7010900, 7031200, 7220000].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '隠者',
		children: [7032900, 7034100, 7032800].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '執行者',
		children: [7034400, 7034500, 7011700].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '短剣',
		children: [7330000, 7340000, 7350000, 7080000].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '直剣',
		children: [7330100, 7340100, 7350100, 7080100].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '大剣',
		children: [7330200, 7340200, 7350200, 7080200].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '特大剣',
		children: [7330300, 7340300, 7350300, 7080300].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '刺剣',
		children: [7330800, 7340800, 7350800, 7080800].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '重刺剣',
		children: [7330900, 7340900, 7350900, 7080900].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '曲剣',
		children: [7330400, 7340400, 7350400, 7080400].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '大曲剣',
		children: [7330500, 7340500, 7350500, 7080500].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '刀',
		children: [7330600, 7340600, 7350600, 7080600].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '両刃剣',
		children: [7330700, 7340700, 7350700, 7080700].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '斧',
		children: [7331000, 7341000, 7351000, 7081000].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '大斧',
		children: [7331100, 7341100, 7351100, 7081100].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '槌',
		children: [7331200, 7341200, 7351200, 7081200].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: 'フレイル',
		children: [7331400, 7341400, 7351400, 7081400].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '大槌',
		children: [7331300, 7341300, 7351300, 7081300].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '特大武器',
		children: [7332300, 7342300, 7352300, 7082300].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '槍',
		children: [7331500, 7341500, 7351500, 7081500].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '大槍',
		children: [7331700, 7341700, 7351700, 7081700].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '鎌',
		children: [7331900, 7341900, 7351900, 7081900].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '鞭',
		children: [7332200, 7342200, 7352200, 7082200].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '拳',
		children: [7332000, 7342000, 7352000, 7082000].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '爪',
		children: [7332100, 7342100, 7352100, 7082100].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '弓',
		children: [7332400, 7342400, 7352400, 7082400].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '小盾',
		children: [7082700].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '中盾',
		children: [7082800].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '大盾',
		children: [7082900].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '杖',
		children: [7082500].map(mapper),
	},
	{
		id: '',
		stackable: true,
		name: '聖印',
		children: [7082600].map(mapper),
	},
]

const uniqItemNameMap: Record<number, string> = {
	10001: '薄汚れたフレーム',
	15002: '黒爪の首飾り',
	18000: '祝福された花',
	14002: '祝福された鉄貨',
	17002: '骨のような石',
	13001: '割れた封蝋',
	12003: '砕けた魔女のブローチ',
	14001: '頭冠のメダル',
	13002: '聖律の刃',
	10002: '忌み鬼の呪物',
	14000: '金色の露',
	18002: '黄金の萌芽',
	10000: '古びた懐中時計',
	16002: '古びたミニアチュール',
	11002: '銀の雫',
	11000: 'にび色の砥石',
	16001: '小さな化粧道具',
	12001: '石の杭',
	11001: '追跡者の耳飾り',
	12000: '三冊目の本',
	15000: 'ちぎれた組み紐',
	17001: '夜の痕跡',
	12002: '魔女のブローチ',
	2000: '獣の夜',
	2010: '爵の夜',
	2011: '爵の暗き夜',
	2020: '識の夜',
	2021: '識の暗き夜',
	2030: '深海の夜',
	2031: '深海の暗き夜',
	2040: '魔の夜',
	2050: '狩人の夜',
	2051: '狩人の暗き夜',
	2060: '霞の夜',
	2061: '霞の暗き夜',
	2100: '王の夜',
}
